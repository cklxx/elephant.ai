name: error_handling
description: "ExecuteTask returns an error — agent sends an error reply"
tags: [error, resilience]

setup:
  config:
    session_prefix: "test-lark"
    allow_direct: true
  llm_mode: mock

turns:
  - sender_id: "ou_user_005"
    chat_id: "oc_chat_005"
    message_id: "om_msg_err_001"
    content: "触发错误场景"

    mock_response:
      error: "LLM service unavailable"

    assertions:
      messenger:
        - method: ReplyMessage
          content_contains: ["执行失败"]
