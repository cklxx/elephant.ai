version: '1'
name: foundation-intent-decomposition-constraint-matrix
description: Systematic examination matrix for intent decomposition across consent
  gating, planning boundaries, memory retrieval, channel-action selection, source
  selection, execution mode, scheduling semantics, and deliverable routing
scenarios:
- id: opt-hard-consent-before-external-task-sync
  category: consent_gate_disambiguation
  intent: Policy says no external coordination until user confirms; ask for approval
    before creating or assigning any task.
  expected_tools:
  - request_user
- id: opt-hard-sensitive-context-confirm-gate
  category: consent_gate_disambiguation
  intent: Action depends on sensitive personal context and cannot proceed safely without
    explicit user confirmation.
  expected_tools:
  - request_user
- id: opt-hard-plan-phase-vs-task-update
  category: planning_vs_mutation_boundary
  intent: Define phased rollout plan with milestones, rollback gates, and risk checkpoints
    before any task updates.
  expected_tools:
  - plan
- id: opt-hard-plan-minimal-sequence
  category: planning_vs_mutation_boundary
  intent: Provide the smallest viable staged execution sequence with explicit checkpoints.
  expected_tools:
  - plan
- id: opt-hard-memory-pattern-recall
  category: memory_retrieval_disambiguation
  intent: Recall prior successful remediation patterns from memory before selecting
    next operation.
  expected_tools:
  - memory_search
- id: opt-hard-memory-preference-retrieval
  category: memory_retrieval_disambiguation
  intent: Retrieve remembered user preference and habit context before drafting follow-up.
  expected_tools:
  - memory_search
- id: opt-hard-lark-message-no-attachment
  category: message_vs_upload_channel_action
  intent: Send a concise status update in Lark thread with no file upload or attachment.
  expected_tools:
  - lark_send_message
- id: opt-hard-lark-context-read-before-reply
  category: message_vs_upload_channel_action
  intent: Read recent Lark chat history before sending any proactive response.
  expected_tools:
  - lark_chat_history
- id: opt-hard-lark-upload-explicit-file-handoff
  category: message_vs_upload_channel_action
  intent: Upload the generated markdown package file into Lark thread for download
    handoff.
  expected_tools:
  - lark_upload_file
- id: opt-hard-exact-url-fetch-not-discover
  category: source_selection_disambiguation
  intent: Source URL is fixed and known; fetch exact page content directly rather
    than searching.
  expected_tools:
  - web_fetch
- id: opt-hard-authoritative-discovery-first
  category: source_selection_disambiguation
  intent: No source is selected yet; search authoritative official references and
    shortlist candidates.
  expected_tools:
  - web_search
- id: opt-hard-shell-command-health-check
  category: execution_mode_disambiguation
  intent: Run shell commands to inspect running process state and occupied ports.
  expected_tools:
  - shell_exec
- id: opt-hard-deterministic-computation-snippet
  category: execution_mode_disambiguation
  intent: Execute deterministic code snippet to compute validation metric and return
    score.
  expected_tools:
  - execute_code
- id: opt-hard-find-path-name-before-open
  category: repository_retrieval_disambiguation
  intent: Find files by name and path pattern under nested directories before opening
    content.
  expected_tools:
  - find
- id: opt-hard-ripgrep-fast-regex-repo-scan
  category: repository_retrieval_disambiguation
  intent: Use fast regex scan across repository to locate hot patterns quickly.
  expected_tools:
  - ripgrep
- id: opt-hard-okr-read-before-write
  category: state_read_before_write
  intent: Read current OKR status first before deciding any progress update.
  expected_tools:
  - okr_read
