version: 1

# Baseline exceptions created during full layering migration (2026-02-06).
# New cross-layer dependencies must not be added without explicit, expiring entries.
imports:
  - from: "alex/internal/app/agent/config"
    to: "alex/internal/infra/tools"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/agent/coordinator"
    to: "alex/internal/infra/runtime"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/agent/coordinator"
    to: "alex/internal/infra/tools/builtin/shared"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/agent/hooks"
    to: "alex/internal/infra/memory"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/agent/hooks"
    to: "alex/internal/infra/tools/builtin/okr"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/agent/preparation"
    to: "alex/internal/infra/tools"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/agent/preparation"
    to: "alex/internal/infra/tools/builtin/okr"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/auth"
    to: "alex/internal/infra/auth/crypto"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/context"
    to: "alex/internal/infra/analytics/journal"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/context"
    to: "alex/internal/infra/lark"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/context"
    to: "alex/internal/infra/memory"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/context"
    to: "alex/internal/infra/observability"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/context"
    to: "alex/internal/infra/session/state_store"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/context"
    to: "alex/internal/infra/skills"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/delivery/channels/lark"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/analytics/journal"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/external"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/lark/oauth"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/llm"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/mcp"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/memory"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/session/filestore"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/session/postgresstore"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/session/state_store"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/storage"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/tools"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/tools/builtin/okr"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/scheduler"
    to: "alex/internal/delivery/schedulerapi"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/scheduler"
    to: "alex/internal/infra/moltbook"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/scheduler"
    to: "alex/internal/infra/tools/builtin/okr"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/subscription"
    to: "alex/internal/infra/httpclient"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/llm"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/memory"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/aliases"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/artifacts"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/browser"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/chromebridge"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/diagram"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/execution"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/fileops"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/larktools"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/media"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/memory"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/okr"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/orchestration"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/peekaboo"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/sandbox"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/scheduler"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/search"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/session"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/shared"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/timer"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/ui"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolregistry"
    to: "alex/internal/infra/tools/builtin/web"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/channels/lark"
    to: "alex/internal/infra/lark/oauth"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/channels/lark"
    to: "alex/internal/infra/tools/builtin/artifacts"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/channels/lark"
    to: "alex/internal/infra/tools/builtin/pathutil"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/channels/lark"
    to: "alex/internal/infra/tools/builtin/shared"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/app"
    to: "alex/internal/infra/analytics"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/app"
    to: "alex/internal/infra/analytics/journal"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/app"
    to: "alex/internal/infra/attachments"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/app"
    to: "alex/internal/infra/observability"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/app"
    to: "alex/internal/infra/session/state_store"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/app"
    to: "alex/internal/infra/tools/builtin/shared"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/analytics"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/analytics/journal"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/attachments"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/auth/adapters"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/diagnostics"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/environment"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/lark/oauth"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/moltbook"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/observability"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/session/filestore"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/session/state_store"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/tools/builtin/okr"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/http"
    to: "alex/internal/infra/attachments"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/http"
    to: "alex/internal/infra/httpclient"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/http"
    to: "alex/internal/infra/lark/oauth"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/http"
    to: "alex/internal/infra/memory"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/http"
    to: "alex/internal/infra/observability"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/http"
    to: "alex/internal/infra/sandbox"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/domain/materials"
    to: "alex/internal/infra/attachments"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/domain/materials"
    to: "alex/internal/infra/httpclient"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/infra/tools/builtin/orchestration"
    to: "alex/internal/app/agent/context"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/infra/tools/builtin/scheduler"
    to: "alex/internal/delivery/schedulerapi"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/shared/config"
    to: "alex/internal/infra/tools"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/shared/parser"
    to: "alex/internal/domain/agent/ports"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/shared/parser"
    to: "alex/internal/domain/agent/ports/agent"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  - from: "alex/internal/shared/timer"
    to: "alex/internal/domain/agent/ports/agent"
    owner: "cklxx"
    reason: "Layering migration baseline coupling"
    expires_at: "2026-03-31"
  # New violations added 2026-02-12 (web/lark binary split + task/kernel refactor)
  - from: "alex/internal/app/agent/coordinator"
    to: "alex/internal/infra/tools"
    owner: "cklxx"
    reason: "Coordinator needs tool registry access"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/artifactruntime"
    to: "alex/internal/infra/tools/builtin/artifacts"
    owner: "cklxx"
    reason: "Artifact runtime wraps artifact tools"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/coding"
    owner: "cklxx"
    reason: "DI wires coding bridge"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/kernel"
    owner: "cklxx"
    reason: "DI wires kernel module"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/di"
    to: "alex/internal/infra/task"
    owner: "cklxx"
    reason: "DI wires task manager"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/toolcontext"
    to: "alex/internal/infra/tools/builtin/shared"
    owner: "cklxx"
    reason: "Tool context uses shared tool types"
    expires_at: "2026-03-31"
  - from: "alex/internal/app/workdir"
    to: "alex/internal/infra/tools/builtin/pathutil"
    owner: "cklxx"
    reason: "Workdir uses pathutil for sandbox path resolution"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/eval/bootstrap"
    to: "alex/internal/infra/llm"
    owner: "cklxx"
    reason: "Eval bootstrap wires LLM providers"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/external/bridge"
    owner: "cklxx"
    reason: "Bootstrap wires coding bridge executor"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/httpclient"
    owner: "cklxx"
    reason: "Bootstrap wires HTTP client"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/sandbox"
    owner: "cklxx"
    reason: "Bootstrap wires sandbox manager"
    expires_at: "2026-03-31"
  - from: "alex/internal/delivery/server/bootstrap"
    to: "alex/internal/infra/task"
    owner: "cklxx"
    reason: "Bootstrap wires task manager"
    expires_at: "2026-03-31"
  - from: "alex/internal/infra/task"
    to: "alex/internal/delivery/channels/lark"
    owner: "cklxx"
    reason: "Task notifier sends completion via Lark"
    expires_at: "2026-03-31"
  - from: "alex/internal/infra/task"
    to: "alex/internal/delivery/server/ports"
    owner: "cklxx"
    reason: "Task manager implements server ports"
    expires_at: "2026-03-31"
fanout:
  - package: "alex/internal/delivery/server/bootstrap"
    owner: "cklxx"
    reason: "Bootstrap is inherently high-fanout DI entry point"
    expires_at: "2026-03-31"
file_loc:
  - path: "internal/delivery/channels/lark/gateway_test.go"
    owner: "cklxx"
    reason: "Comprehensive Lark gateway test suite"
    expires_at: "2026-03-31"
package_size:
  - package: "alex/internal/delivery/server/http"
    owner: "cklxx"
    reason: "HTTP handler layer has many endpoints"
    expires_at: "2026-03-31"
