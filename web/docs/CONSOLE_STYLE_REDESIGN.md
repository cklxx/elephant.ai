# 研究控制台风格 Web UI 重构方案

## 设计目标
- 参考截图中的极简研究面板，打造顶部问候卡片 + 双栏自适应布局的浅色工作台。
- 统一语言（默认英文，可切换中文）与组件样式，让按钮、徽章、列表在不同模块保持一致节奏。
- 精简所有显性文案，保留必要指引并以芯片、图标等轻提示呈现。
- 加强信息分区：左侧状态与会话、中央对话流与时间线概览，减少冗余文案。
- 将首页定位为轻量介绍面，提供入口跳转到聚焦对话的研究控制台视图。
- 保持现有数据流、SSE 事件与 Zustand 状态逻辑不变，保证功能稳定迁移。
- 对话页以消息流为核心，工具执行的开始、进行中与完成状态都在气泡中展示。

## 结构布局
1. **页面骨架**
   - `console-shell` 最大宽度调整为 `max-w-7xl`，配合全屏 `bg-app-canvas` 渐变营造柔和留白。
   - 主体采用 `xl:grid-cols-[260px_minmax(0,1fr)]`，桌面端保持状态/历史与工作区双列布局，小屏自动堆叠。

2. **左侧概览面板**
- 顶部状态卡展示当前会话 ID、离线提示（仅离线时出现）、Mock 提示与时间线进度摘要，提供 `Reset` 操作。
   - 下方会话卡分区列出置顶与最近会话，支持在列表中直接重命名、固定、清空选择。
   - 快速指引与时间线提示并入左栏，改用 `console-quiet-chip` 标签 + 紧凑按钮，一键预填任务并聚焦输入框。

3. **中央对话工作区**
   - 顶部对话抬头展示当前会话徽标、语言切换与时间线进度，弱化文案，把焦点交给事件流。
   - `TerminalOutput` 以聊天气泡呈现用户消息、工具动作和最终结果，进行中的工具额外在顶部显示 “Working…” / “执行中…” 状态。
   - 工具调用卡片改为纵向时间线，按“开始 → 流式输出 → 结果/错误”顺序折叠参数、实时输出与结果文本，并在活跃节点上添加呼吸动画与耗时标记，保持单次对话的上下文清晰。
   - 输入区固定在消息列表底部，保持按钮与文本域等高，突出操作节奏。
   - 桌面端右侧仍提供粘性时间线栏，小屏通过触发按钮弹出对话框。
4. **首页简介面**
   - Hero 区域展示研究工作台定位、主要 CTA 与特性亮点，亮点卡片使用圆角玻璃材质呼应控制台。
   - 底部摘要列出历史、时间线、语言等核心卖点，为后续产品截图/动画预留空间。

4. **右侧指引面板**
   - `Common tasks` 快速入口使用浅灰卡片，右下角提供时间线提示文案，呼应截图中的轻指引模块。（已合并至左栏待办）

## 视觉语言
- **颜色**：背景渐变更柔和（浅灰 + 淡蓝光晕），主色维持天蓝，所有按钮/徽章统一使用主色与灰阶中性色。
- **阴影与圆角**：`console-panel` 更新为 `rounded-[28px]` + 0.04 透明度阴影，卡片统一 24px 圆角，贴合截图的平滑体量感。
- **排版**：标题、标签采用紧凑大写字距 (`tracking-[0.3em]`)，正文走 12-14px 细节文字，减少辅助文案干扰。
- **滚动条**：继续使用 `console-scrollbar`，缩窄 6px 宽度以配合压缩布局。

## 交互要点
- `Reset` 操作用于清空当前会话、事件与焦点状态，Mock 指示器保留在同一区块。
- 点击历史会话仍触发 `handleSessionSelect`，并保持置顶与重命名行为的一致性。
- `TaskInput` 继续支持 Enter 提交/Shift+Enter 换行，同时压缩高度，按钮与输入框高度对齐。
- 对话气泡在工具运行期间展示 “Working…” / “执行中…” 状态，完成后由时间线逐步展开参数、实时输出和结果，保持高度可控。
- 移动端通过顶部按钮打开时间线 Dialog，选择后关闭并滚动到对应气泡。
- 左栏快速任务按钮以精简标签支持预填建议，自动聚焦输入框，二次点击可直接调整后提交。
- 工具时间线按照步骤持续附加流式输出并展示相对耗时，活跃节点伴随轻量 pulse 动效提示执行状态。

## 验收方案
1. **视觉验收**
   - 对比参考截图，确认问候卡排版、三列比例、卡片阴影与浅灰背景符合预期。
   - 观察按钮、徽章、标签色调是否在全局保持一致。
2. **功能回归**
   - 任务提交：Mock 与真实模式均可提交任务，事件实时刷新。
   - 会话切换：置顶/最近列表可切换，事件重连无异常。
   - Reset：点击后会话、事件、输入框全部回到初始状态。
3. **响应式验收**
   - `lg` 以上保持双列，`md` 以下堆叠，确保 TaskInput 不溢出。
   - 滚动区域在移动端可流畅滑动，聊天气泡在小屏仍然保持可读间距。
4. **可访问性**
   - 检查主要交互元素拥有可见焦点（Tailwind `focus:ring` 样式）。
   - 确保按钮文本对比度满足 WCAG AA。
5. **自动化与手动测试**
   - 执行新增的 Playwright E2E 覆盖关键路径（布局元素渲染、会话切换、新建会话、Mock 指示器）。
- 手动模拟网络断开，确认 `ConnectionStatus` 仅在离线时显示“Offline”并支持点击 `Retry` 重连。
   - 检查聊天气泡在工具运行、输出及完成态下的展开/滚动表现。

## 待完成任务
- **小屏导航**：为 <768px 设备设计主页与对话页之间的快捷切换入口。
- **主题与暗色支持**：新配色暂未同步到暗色方案，需补充对比度校正与 Token 映射。
- **聊天截图与文档**：补充最新聊天视图的视觉示例并同步多语言文案。
- **工具输出摘要**：为超长 JSON/文本提供概要、折叠或下载入口，保持时间线紧凑。
- **图标化引导**：为快速指引与时间线说明补充图标或 tooltip，强化引导同时控制文字数量。
- **Mock 说明**：离线/模拟状态的说明文案改用 tooltip，避免破坏侧栏紧凑布局。
