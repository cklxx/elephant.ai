@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * ALEX Visual Language - Global Styles
 *
 * Design Philosophy:
 * - High-contrast monochrome foundation inspired by black & white stickers
 * - Bold outlines, offset shadows, and tactile hover states
 * - High information density with generous spacing
 * - Bold typography hierarchy
 * - Fast transitions that preserve the cutout feel
 */

/* ========================================================================
   THEME VARIABLES
   ======================================================================== */

@layer base {
    /**
   * Light Theme (Default)
   * - High-contrast grayscale tuned for sticker aesthetics
   * - WCAG AA compliant contrast ratios
   */
    :root {
        /* Base colors */
        --background: 0 0% 100% / 0.04;
        --foreground: 0 0% 10%;

        /* Card backgrounds */
        --card: 0 0% 100% / 0.08;
        --card-foreground: 0 0% 10%;

        /* Primary accent */
        --primary: 0 0% 10% / 0.85;
        --primary-foreground: 0 0% 96% / 0.9;

        /* Secondary elements */
        --secondary: 0 0% 100% / 0.12;
        --secondary-foreground: 0 0% 10% / 0.9;

        /* Muted elements */
        --muted: 0 0% 100% / 0.14;
        --muted-foreground: 0 0% 35% / 0.9;

        /* Accent (neutral highlight) */
        --accent: 0 0% 100% / 0.1;
        --accent-foreground: 0 0% 10% / 0.9;

        /* Destructive */
        --destructive: 0 0% 20% / 0.85;
        --destructive-foreground: 0 0% 96% / 0.9;

        /* Borders and inputs */
        --border: 0 0% 18% / 0.5;
        --input: 0 0% 22% / 0.5;

        /* Focus ring */
        --ring: 0 0% 15% / 0.6;

        /* Grayscale palette */
        --gray-50: 0 0% 98% / 0.4;
        --gray-100: 0 0% 94% / 0.4;
        --gray-200: 0 0% 88% / 0.4;
        --gray-300: 0 0% 80% / 0.4;
        --gray-400: 0 0% 65% / 0.6;
        --gray-500: 0 0% 45% / 0.7;
        --gray-600: 0 0% 35% / 0.75;
        --gray-700: 0 0% 25% / 0.8;
        --gray-800: 0 0% 15% / 0.85;
        --gray-900: 0 0% 10% / 0.9;
        --gray-950: 0 0% 5% / 0.95;
    }

    /**
   * Dark Theme
   * - Preserves monochrome contrast for nighttime readability
   * - Inverted hierarchy with luminous neutrals
   */
    .dark {
        /* Base colors */
        --background: 0 0% 0% / 0.15;
        --foreground: 0 0% 92%;

        /* Card backgrounds */
        --card: 0 0% 15% / 0.2;
        --card-foreground: 0 0% 92%;

        /* Primary accent */
        --primary: 0 0% 92% / 0.85;
        --primary-foreground: 0 0% 8% / 0.9;

        /* Secondary elements */
        --secondary: 0 0% 25% / 0.25;
        --secondary-foreground: 0 0% 92% / 0.9;

        /* Muted elements */
        --muted: 0 0% 28% / 0.3;
        --muted-foreground: 0 0% 70% / 0.9;

        /* Accent */
        --accent: 0 0% 20% / 0.3;
        --accent-foreground: 0 0% 92% / 0.9;

        /* Destructive */
        --destructive: 0 0% 85% / 0.8;
        --destructive-foreground: 0 0% 6% / 0.9;

        /* Borders and inputs */
        --border: 0 0% 40% / 0.4;
        --input: 0 0% 32% / 0.45;

        /* Focus ring */
        --ring: 0 0% 85% / 0.6;

        /* Grayscale palette (dark) */
        --gray-50: 0 0% 6%;
        --gray-100: 0 0% 12%;
        --gray-200: 0 0% 18%;
        --gray-300: 0 0% 26%;
        --gray-400: 0 0% 38%;
        --gray-500: 0 0% 52%;
        --gray-600: 0 0% 64%;
        --gray-700: 0 0% 74%;
        --gray-800: 0 0% 84%;
        --gray-900: 0 0% 92%;
        --gray-950: 0 0% 96%;
    }
}

/* ========================================================================
   BASE STYLES
   ======================================================================== */

@layer base {
    *:not(input):not(textarea):not(select) {
        border-color: transparent;
        border-width: 0;
        border-style: none !important;
    }

    input,
    textarea,
    select {
        border-width: 1px;
        border-style: solid;
        border-color: hsl(var(--input));
        background-color: hsla(var(--background) / 0.85);
    }

    body {
        @apply bg-transparent text-foreground;
        font-feature-settings:
            "rlig" 1,
            "calt" 1; /* Enable ligatures */
    }

    /* Typography defaults */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply font-semibold tracking-tight;
    }

    h1 {
        @apply text-4xl;
    }
    h2 {
        @apply text-3xl;
    }
    h3 {
        @apply text-2xl;
    }
    h4 {
        @apply text-xl;
    }
    h5 {
        @apply text-lg;
    }
    h6 {
        @apply text-base;
    }
}

@layer base {
    body,
    body * {
        letter-spacing: normal !important;
        text-transform: none !important;
    }
}

/* ========================================================================
   CONSOLE UTILITY CLASSES
   ======================================================================== */

@layer components {
    /**
     * Card Styles
     * - Bold borders and offset drop shadows for sticker feel
     * - Subtle hover lift on interactive cards
     */
    .console-card {
        background: hsla(var(--foreground) / 0.04);
        border: none;
        border-radius: 12px;
        box-shadow: none;
        backdrop-filter: blur(6px);
        transition: transform 0.15s ease;
    }

    .console-card-interactive {
        background: hsla(var(--foreground) / 0.05);
        border: none;
        border-radius: 12px;
        box-shadow: none;
        backdrop-filter: blur(8px);
        transition:
            transform 0.15s ease,
            background-color 0.15s ease;
    }

    .console-card-interactive:hover {
        background: hsla(var(--foreground) / 0.08);
        transform: translate(-4px, -4px);
        box-shadow: none;
    }

    /**
   * Section Styles
   * - Clear visual hierarchy through borders
   * - Generous padding for readability
   */
    .console-section {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
        background: hsla(var(--foreground) / 0.03);
        border-bottom: none;
    }

    /**
   * Typography Utilities
   * - Bold headings for hierarchy
   * - Regular body text with proper line height
   */
    .console-heading {
        @apply font-semibold text-foreground tracking-tight;
    }

    .console-subheading {
        @apply font-medium text-muted-foreground;
    }

    .console-body {
        @apply text-foreground leading-relaxed;
    }

    .console-caption {
        @apply text-sm text-muted-foreground;
    }

    .timeline-anchor-target {
        @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-foreground focus-visible:ring-offset-2 focus-visible:ring-offset-background;
    }

    .timeline-anchor-highlight {
        @apply ring-2 ring-foreground ring-offset-2 ring-offset-background bg-gray-100 dark:bg-gray-800;
    }

    /**
     * Button Styles
     * - Thick borders and shadows to match sticker treatment
     * - Animated hover/focus offsets for tactile feedback
     */
    .console-button {
        @apply inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 font-semibold uppercase tracking-[0.12em] transition-transform duration-150 cursor-pointer select-none;
        color: hsl(var(--foreground));
        background: hsla(var(--foreground) / 0.06);
        border: none;
        box-shadow: none;
    }

    .console-button:hover {
        transform: translate(-2px, -2px);
        box-shadow: none;
    }

    .console-button:active {
        transform: translate(0, 0);
        box-shadow: none;
    }

    .console-button:focus-visible {
        outline: 2px solid hsla(var(--foreground) / 0.3);
        outline-offset: 3px;
    }

    .console-button:disabled {
        cursor: not-allowed;
        opacity: 0.6;
        transform: none;
        box-shadow: none;
    }

    .console-button:disabled:hover,
    .console-button:disabled:active {
        transform: none;
        box-shadow: none;
    }

    .console-button-primary {
        background: hsla(var(--foreground) / 0.85);
        color: hsl(var(--primary-foreground));
    }

    .console-button-secondary {
        background: hsla(var(--secondary));
        color: hsl(var(--secondary-foreground));
    }

    .console-button-ghost {
        background: transparent;
    }

    .console-button-ghost:hover {
        background: hsla(var(--foreground) / 0.08);
    }

    .console-primary-action {
        @apply inline-flex items-center justify-center gap-2 rounded-2xl px-5 py-2.5 text-sm font-semibold transition-transform duration-150;
        background: hsla(var(--foreground) / 0.85);
        color: hsl(var(--primary-foreground));
        border: none;
        box-shadow: none;
    }

    .console-primary-action:hover {
        transform: translate(-2px, -2px);
        box-shadow: none;
    }

    .console-primary-action:active {
        transform: translate(0, 0);
        box-shadow: none;
    }

    .console-primary-action:focus-visible {
        outline: 2px solid hsla(var(--foreground) / 0.3);
        outline-offset: 3px;
    }

    .console-primary-action:disabled {
        cursor: not-allowed;
        opacity: 0.55;
        transform: none;
        box-shadow: none;
    }

    .console-primary-action:disabled:hover,
    .console-primary-action:disabled:active {
        transform: none;
        box-shadow: none;
    }

    .console-icon-button {
        @apply inline-flex items-center justify-center rounded-full transition-transform duration-150;
        border: none;
        background: hsla(var(--foreground) / 0.08);
        color: hsl(var(--foreground));
        padding: 0.4rem;
        box-shadow: none;
    }

    .console-icon-button:hover {
        transform: translate(-1.5px, -1.5px);
        box-shadow: none;
    }

    .console-icon-button:active {
        transform: translate(0, 0);
        box-shadow: none;
    }

    .console-icon-button:focus-visible {
        outline: 2px solid hsla(var(--foreground) / 0.3);
        outline-offset: 3px;
    }

    .console-icon-button:disabled {
        cursor: not-allowed;
        opacity: 0.5;
        transform: none;
        box-shadow: none;
    }

    .console-icon-button:disabled:hover,
    .console-icon-button:disabled:active {
        transform: none;
        box-shadow: none;
    }

    .console-icon-button-primary {
        background: hsla(var(--foreground) / 0.85);
        color: hsl(var(--primary-foreground));
    }

    .console-icon-button-ghost {
        background: transparent;
    }

    .console-icon-button-danger {
        background: hsla(var(--destructive));
        color: hsl(var(--destructive-foreground));
    }

    /**
   * Input Styles
   * - Clean borders
   * - Clear focus states
   */
    .console-input {
        @apply w-full px-3 py-2 bg-background border border-input rounded-md;
        @apply text-foreground placeholder:text-muted-foreground;
        @apply focus:outline-none focus:ring-2 focus:ring-ring;
        @apply transition-shadow duration-150;
    }

    /**
   * Badge/Tag Styles
   * - Minimal, flat design
   * - Clear text hierarchy
   */
    .console-badge {
        @apply inline-flex items-center rounded px-2 py-1 text-xs font-semibold uppercase tracking-[0.18em];
        background: hsla(var(--foreground) / 0.07);
        color: hsl(var(--foreground));
        border: none;
        box-shadow: none;
    }

    .console-badge-primary {
        @apply console-badge;
        background: hsla(var(--foreground) / 0.85);
        color: hsl(var(--primary-foreground));
    }

    .console-badge-outline {
        @apply console-badge;
        background: transparent;
    }
}

@layer utilities {
    .bg-app-canvas {
        background-image:
            radial-gradient(
                circle at 20% -10%,
                hsla(0, 0%, 96%, 0.25),
                transparent 52%
            ),
            radial-gradient(
                circle at 90% 10%,
                hsla(0, 0%, 82%, 0.12),
                transparent 55%
            ),
            linear-gradient(
                180deg,
                hsl(var(--background)) 0%,
                transparent 100%
            );
    }

    .console-shell {
        @apply mx-auto flex w-full max-w-7xl flex-1 flex-col gap-6 px-4 pb-10 pt-8 sm:px-6 lg:px-8 xl:px-10;
    }

    .console-panel {
        border-radius: 28px;
        background: hsla(var(--foreground) / 0.05);
        border: none;
        box-shadow: none;
        backdrop-filter: blur(10px);
    }

    .console-pane-title {
        @apply text-[13px] font-semibold uppercase tracking-[0.2em];
        color: hsl(var(--foreground));
    }

    .console-section-title {
        @apply text-lg font-semibold;
        color: hsl(var(--foreground));
    }

    .console-subtle {
        @apply text-sm;
        color: hsl(var(--gray-600));
    }

    .console-microcopy {
        @apply text-xs leading-relaxed;
        color: hsl(var(--gray-500));
    }

    .console-quiet-chip {
        display: inline-flex;
        align-items: center;
        border-radius: 9999px;
        border: none;
        background: hsla(var(--foreground) / 0.08);
        padding: 0.25rem 0.75rem;
        font-size: 11px;
        font-weight: 600;
        letter-spacing: 0.12em;
        color: hsl(var(--foreground));
        box-shadow: none;
    }

    .console-event-line {
        display: grid;
        grid-template-columns: auto 1fr;
        align-items: start;
        gap: 0.75rem;
        margin: 0.25rem 0;
        padding: 0.75rem 1rem;
        border-radius: 14px;
        border: none;
        background: hsla(var(--foreground) / 0.02);
        box-shadow: none;
        transition: background-color 0.18s ease;
    }

    .console-event-line:hover {
        background: hsla(var(--foreground) / 0.06);
        box-shadow: none;
        transform: none;
    }

    .console-event-line.is-highlighted {
        background: hsla(var(--foreground) / 0.08);
        box-shadow: none;
        border: none;
    }

    .console-event-line.is-task-analysis {
        margin-bottom: 0;
        background: transparent;
        border: none;
        box-shadow: none;
        padding: 0.5rem 1rem 0.25rem 0rem;
    }

    .console-event-line.is-task-analysis:hover {
        border: none;
        background: transparent;
        box-shadow: none;
        transform: none;
    }

    .console-event-timestamp {
        @apply font-mono text-[11px] uppercase tracking-[0.22em];
        color: hsl(var(--gray-500));
        line-height: 1.4;
    }

    .console-event-content {
        @apply text-sm leading-relaxed whitespace-pre-wrap;
    }

    .console-user-task {
        display: flex;
        justify-content: flex-end;
        margin: 0.5rem 0;
        padding: 0 0.5rem;
    }

    .console-user-task-bubble {
        width: min(720px, 100%);
        border-radius: 22px;
        border: none;
        background: linear-gradient(
                180deg,
                rgba(255, 255, 255, 0.7),
                rgba(255, 255, 255, 0.4)
            )
            hsla(var(--primary) / 0.08);
        box-shadow: none;
        padding: 0.9rem 1.25rem 1.2rem;
    }

    .console-user-task-meta {
        @apply font-mono text-[11px] uppercase tracking-[0.22em];
        color: hsl(var(--gray-600));
        display: block;
        margin-bottom: 0.5rem;
    }

    .console-user-task-content {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        color: hsl(var(--foreground));
        font-size: 0.95rem;
        line-height: 1.6;
    }

    .console-user-task-content span {
        @apply whitespace-pre-wrap;
    }


    .console-assistant-message {
        display: flex;
        justify-content: flex-start;
        margin: 0.5rem 0;
        padding: 0 0.5rem;
    }

    .console-assistant-bubble {
        width: min(720px, 100%);
        border-radius: 22px;
        background: linear-gradient(
                180deg,
                hsla(var(--foreground) / 0.04),
                hsla(var(--foreground) / 0.02)
            )
            hsla(var(--foreground) / 0.04);
        padding: 0.9rem 1.25rem 1.2rem;
        backdrop-filter: blur(4px);
    }

    .console-assistant-meta {
        @apply font-mono text-[11px] uppercase tracking-[0.22em];
        color: hsl(var(--gray-600));
        display: flex;
        align-items: center;
        gap: 0.25rem;
        margin-bottom: 0.5rem;
    }

    .console-assistant-meta-source {
        color: hsl(var(--gray-500));
    }

    .console-assistant-meta-streaming {
        color: hsl(var(--primary));
        letter-spacing: 0.4em;
        font-size: 0.7rem;
    }

    .console-assistant-content {
        color: hsl(var(--foreground));
    }

    .console-assistant-content .markdown-body__content {
        font-size: 0.95rem;
        line-height: 1.6;
    }

    
    .console-event-content em {
        @apply not-italic;
        color: hsl(var(--gray-500));
    }

    .console-event-content strong {
        @apply font-semibold;
        color: hsl(var(--foreground));
    }

    .console-empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        border-radius: 16px;
        background: hsla(var(--foreground) / 0.03);
        padding: 3rem 1.5rem;
        color: hsl(var(--muted-foreground));
        text-align: center;
    }

    .console-scrollbar {
        scrollbar-color: hsla(var(--foreground) / 0.3) transparent;
    }

    .console-scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .console-scrollbar::-webkit-scrollbar-thumb {
        background-color: hsla(var(--foreground) / 0.3);
        border-radius: 9999px;
    }

    /**
   * Manus UI Layout Styles
   * - Fixed sidebar layout
   * - Full height content areas
   * - Bottom input bar
   */
    .layout-sidebar {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        width: 16rem;
        background: hsla(var(--foreground) / 0.06);
        border-right: none;
        box-shadow: none;
        backdrop-filter: blur(12px);
    }

    .layout-main {
        margin-left: 16rem;
        display: flex;
        height: 100vh;
        flex-direction: column;
        background: transparent;
    }

    .layout-header {
        position: sticky;
        top: 0;
        z-index: 10;
        background: transparent;
        border-bottom: none;
        box-shadow: none;
        backdrop-filter: none;
    }

    .layout-content {
        flex: 1;
        overflow-y: auto;
        background: transparent;
    }

    .layout-input-bar {
        position: sticky;
        bottom: 0;
        background: hsla(var(--foreground) / 0.05);
        border-top: none;
        box-shadow: none;
        backdrop-filter: blur(12px);
    }
}

/* ========================================================================
   MINIMAL ANIMATIONS
   ======================================================================== */

@layer utilities {
    /**
   * Fade In (Fast, Subtle)
   * - Quick entrance animation
   * - Minimal movement
   */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(4px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fadeIn {
        animation: fadeIn 0.2s ease-out;
    }

    /**
   * Hover States
   * - Subtle background change only
   * - No lifts, glows, or transforms
   */
    .hover-subtle {
        @apply transition-colors duration-150;
    }

    .hover-subtle:hover {
        @apply bg-accent;
    }

    /**
   * Focus Ring (Accessible)
   * - Clear, consistent focus indicators
   * - WCAG compliant
   */
    .focus-ring {
        @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
    }
}

/* ========================================================================
   SCROLLBAR STYLES
   ======================================================================== */

/**
 * Minimal Scrollbar
 * - Low-saturation gray
 * - No gradients or effects
 */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: hsl(var(--muted));
}

::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground));
}

/* ========================================================================
   MARKDOWN/PROSE STYLES
   ======================================================================== */

/**
 * Code and Pre Blocks
 * - Clean, minimal styling
 * - No gradients or heavy shadows
 */
.prose {
    @apply text-foreground;
}

.prose code {
    @apply bg-muted px-1.5 py-0.5 rounded text-sm font-mono text-foreground whitespace-nowrap;
}

.prose pre {
    @apply bg-gray-900 text-gray-100 rounded-md p-4 overflow-x-auto;
    @apply border border-border;
}

.prose pre code {
    @apply bg-transparent p-0;
}

.dark .prose pre {
    @apply bg-gray-950 border-gray-800;
}

.markdown-body {
    @apply text-foreground;
}

.markdown-body .markdown-body__content {
    @apply max-w-none;
}

.markdown-body .wmde-markdown {
    background: transparent !important;
    color: inherit;
    font-family: inherit;
}

.markdown-body .wmde-markdown p,
.markdown-body .wmde-markdown li {
    @apply leading-relaxed;
}

.markdown-body .markdown-body__content > :first-child {
    @apply mt-0;
}

.markdown-body .markdown-body__content > :last-child {
    @apply mb-0;
}

.markdown-body .markdown-code-block {
    @apply font-mono;
}

/* ========================================================================
   LOADING/SKELETON STATES
   ======================================================================== */

/**
 * Loading Skeleton
 * - Subtle pulse, no shimmer effects
 * - Maintains the extended grayscale palette
 */
.skeleton {
    @apply animate-pulse bg-muted rounded;
}

/* ========================================================================
   DEPRECATED/LEGACY CLASSES (Phase 1 Cleanup - 2025-10-07)
   ======================================================================== */

/**
 * Empty placeholders for deprecated classes to prevent breaking existing
 * components that haven't been migrated yet. These will be removed in Phase 2.
 *
 * Deprecated classes:
 * - glass, glass-dark, glass-card -> Use console-card instead
 * - gradient-* -> Use CSS variables (--primary, --foreground, etc.)
 * - shadow-* -> Removed (console uses no shadows)
 * - hover-lift, hover-glow -> Use hover-subtle instead
 * - card-interactive -> Use console-card-interactive instead
 */
.glass,
.glass-dark,
.glass-card,
.gradient-bg-primary,
.gradient-bg-hero,
.gradient-bg-card,
.gradient-mesh,
.gradient-text,
.border-gradient,
.hover-lift,
.hover-glow,
.card-interactive,
.shadow-soft,
.shadow-medium,
.shadow-strong {
    /* Deprecated - no styles applied */
}
