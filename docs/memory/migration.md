# Memory Store Migration (D5)

Updated: 2026-02-01

## Summary
- Memory FileStore now uses a layered structure: `entries/`, `daily/`, and `MEMORY.md`.
- Legacy flat files (`~/.alex/memory/*.md`) are moved into `entries/` on startup (idempotent).
- Daily summaries (`daily/YYYY-MM-DD.md`) and long-term memory (`MEMORY.md`) are generated by the new pipelines; manual edits in `MEMORY.md` are preserved and merged.

## Manual Steps (Only If Needed)
1. Stop the server.
2. Move any remaining legacy `*.md` files from `~/.alex/memory/` into `~/.alex/memory/entries/`.
3. Restart; daily summaries and `MEMORY.md` will be generated by scheduled pipelines.

## Notes
- The migration only affects the file-backed memory store. Postgres-backed memory is unchanged.
- Legacy files are skipped if a file with the same name already exists in `entries/`.
