# Track 3: äººç±»é›†æˆäº¤äº’ â€” Lark å…¨ç”Ÿæ€ â€” è¯¦ç»† ROADMAP

> **Parent:** `docs/roadmap/roadmap-lark-native-proactive-assistant.md`
> **Owner:** cklxx
> **Created:** 2026-02-01
> **Last Updated:** 2026-02-01

---

## æ¦‚è¿°

**Lark æ˜¯ä¸»æˆ˜åœºã€‚** ä¸æ­¢æ˜¯ IM èŠå¤©ï¼Œè€Œæ˜¯æ·±åº¦æ¥å…¥ Lark å…¨ç”Ÿæ€ â€” æ–‡æ¡£è¯»å†™ä¿®æ”¹è¯„è®ºã€è¡¨æ ¼ä¸å¤šç»´è¡¨æ ¼ã€çŸ¥è¯†åº“ã€æ—¥å†ã€ä»»åŠ¡ã€å®¡æ‰¹ â€” è®©åŠ©æ‰‹æˆä¸ºç”¨æˆ·åœ¨ Lark ä¸­çš„æ•°å­—åˆ†èº«ã€‚Web å’Œ CLI ä½œä¸ºè¡¥å……äº¤äº’é¢ã€‚

**å…³é”®è·¯å¾„ï¼š** `internal/channels/lark/` Â· `internal/lark/` (æ–°å¢) Â· `internal/tools/builtin/larktools/` Â· `web/` Â· `cmd/alex/`

**Lark Open API ä¾èµ–ï¼š** æ‰€æœ‰ Lark ç”Ÿæ€æ¥å…¥éƒ½åŸºäº [Lark Open Platform API](https://open.larksuite.com/document)ï¼Œéœ€è¦ App çº§æƒé™é…ç½®ã€‚

---

## 1. Lark IM æ¶ˆæ¯å±‚

> `internal/channels/lark/`

### ç°çŠ¶

- WebSocket äº‹ä»¶å¾ªç¯ â€” å®æ—¶æ¥æ”¶æ¶ˆæ¯
- ç¾¤èŠå†å²è·å– â€” æ‹‰å–ä¸Šä¸‹æ–‡
- Emoji è¿›åº¦æ ‡è®° â€” â³ğŸ”§âœ… çŠ¶æ€åé¦ˆ
- å®¡æ‰¹é—¨ç¦ â€” æ•æ„Ÿæ“ä½œéœ€ç¡®è®¤
- å¯Œé™„ä»¶å‘é€ â€” PDF/å›¾ç‰‡/å¡ç‰‡
- ä¸»åŠ¨å‘é€æ¶ˆæ¯ â€” `lark_send_message` å·¥å…·

### M0: å·²è¾¾æˆ

å…¨éƒ¨åŸºç¡€ IM åŠŸèƒ½å·²å®ç°ã€‚

### M1: ä¸»åŠ¨æ¶ˆæ¯äº¤äº’

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| ç¾¤èŠæ¶ˆæ¯è‡ªåŠ¨æ„ŸçŸ¥ | ç›‘å¬æ‰€æœ‰æ¶ˆæ¯ï¼ˆä¸åª @mentionï¼‰ï¼Œç†è§£ç¾¤èŠåŠ¨æ€ | âœ… å·²å®ç° | `channels/lark/gateway.go` |
| ä¸»åŠ¨æ‘˜è¦ | ç¾¤èŠé•¿è®¨è®ºåï¼ˆæŒ‰æ¶ˆæ¯é‡/æ—¶é—´çª—å£è§¦å‘ï¼‰ä¸»åŠ¨æä¾›æ‘˜è¦ | âŒ å¾…å®ç° | `channels/lark/proactive.go` |
| å®šæ—¶æé†’ | ä»å¯¹è¯ä¸­æå– deadline/çº¦å®šï¼Œåˆ°æœŸä¸»åŠ¨æé†’ | âš™ï¸ éƒ¨åˆ† | `internal/scheduler/` |
| æ™ºèƒ½å¡ç‰‡äº¤äº’ | Interactive Card å±•ç¤ºç»“æ„åŒ–ç»“æœ + æŒ‰é’®æ“ä½œï¼ˆå®¡æ‰¹/é€‰æ‹©/åé¦ˆï¼‰ | âŒ å¾…å®ç° | `channels/lark/cards/` |
| æ¶ˆæ¯å¼•ç”¨å›å¤ | å¼•ç”¨ç‰¹å®šæ¶ˆæ¯å›å¤ï¼Œä¿æŒè®¨è®ºä¸Šä¸‹æ–‡è¿è´¯ | âœ… å·²å®ç° | `channels/lark/` |
| æ¶ˆæ¯ç±»å‹ä¸°å¯ŒåŒ– | æ”¯æŒå‘é€è¡¨æ ¼ã€ä»£ç å—ã€Markdown æ¸²æŸ“æ¶ˆæ¯ | âŒ å¾…å®ç° | `channels/lark/` |

### M2: æ·±åº¦ IM

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| å¤šç¾¤è”åŠ¨ | è·¨ç¾¤ä¿¡æ¯æ±‡èšä¸åŒæ­¥ | âŒ å¾…å®ç° | `channels/lark/` |
| è¯­éŸ³æ¶ˆæ¯ç†è§£ | è¯­éŸ³æ¶ˆæ¯è½¬å½• + å†…å®¹ç†è§£ | âŒ å¾…å®ç° | `channels/lark/` |
| åŸºäºè§’è‰²çš„æƒé™ | ä¸åŒç¾¤/ç”¨æˆ·ä¸åŒåŠŸèƒ½/å·¥å…·æƒé™ | âŒ å¾…å®ç° | `channels/lark/` |
| æ¶ˆæ¯ååº”åˆ†æ | ä» emoji reactions ç†è§£ç”¨æˆ·æ€åº¦ | âŒ å¾…å®ç° | `channels/lark/` |

---

## 2. Lark Open API å°è£…å±‚

> æ–°å¢ `internal/lark/`

æ‰€æœ‰ Lark ç”Ÿæ€æ¥å…¥çš„åŸºç¡€è®¾æ–½å±‚ã€‚ç»Ÿä¸€å°è£… Lark Open API clientï¼Œå¤„ç†è®¤è¯ã€é™æµã€é”™è¯¯é‡è¯•ã€‚

### M0: åŸºç¡€å°è£…

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| Lark API Client | ç»Ÿä¸€çš„ HTTP clientï¼Œå¤„ç† tenant_access_token åˆ·æ–° | âŒ å¾…å®ç° | `lark/client.go` |
| è®¤è¯ç®¡ç† | App credentials ç®¡ç† + token è‡ªåŠ¨åˆ·æ–° | âŒ å¾…å®ç° | `lark/auth.go` |
| é™æµä¸é‡è¯• | Lark API é™æµæ„ŸçŸ¥ + æŒ‡æ•°é€€é¿é‡è¯• | âŒ å¾…å®ç° | `lark/ratelimit.go` |
| é”™è¯¯ç æ˜ å°„ | Lark é”™è¯¯ç  â†’ ç»“æ„åŒ–é”™è¯¯ | âŒ å¾…å®ç° | `lark/errors.go` |
| æƒé™å£°æ˜ | æ‰€éœ€ Lark æƒé™çš„å£°æ˜å¼ç®¡ç† | âŒ å¾…å®ç° | `lark/permissions.go` |

---

## 3. Lark æ–‡æ¡£ç”Ÿæ€ (Docs / Docx)

> æ–°å¢ `internal/lark/docs/`

### M1: æ–‡æ¡£è¯»å–

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| æ–‡æ¡£å†…å®¹è¯»å– | é€šè¿‡ Docx API è¯»å–æ–‡æ¡£å…¨æ–‡ï¼Œå¯Œæ–‡æœ¬ â†’ Markdown è½¬æ¢ | âŒ å¾…å®ç° | `lark/docs/reader.go` |
| æ–‡æ¡£å…ƒä¿¡æ¯ | æ ‡é¢˜ã€ä½œè€…ã€åˆ›å»º/ä¿®æ”¹æ—¶é—´ã€ç‰ˆæœ¬ã€æƒé™ | âŒ å¾…å®ç° | `lark/docs/meta.go` |
| æ–‡æ¡£åˆ—è¡¨æœç´¢ | æŒ‰å…³é”®è¯/æ–‡ä»¶å¤¹/åˆ›å»ºè€…æœç´¢æ–‡æ¡£ | âŒ å¾…å®ç° | `lark/docs/search.go` |
| æ–‡æ¡£è¯„è®ºè¯»å– | è¯»å–æ–‡æ¡£ä¸­çš„è¯„è®ºã€æ‰¹æ³¨ã€@æåŠ | âŒ å¾…å®ç° | `lark/docs/comments.go` |
| æ–‡æ¡£å—è§£æ | è§£æ Docx Block ç»“æ„ï¼ˆæ®µè½/è¡¨æ ¼/å›¾ç‰‡/ä»£ç å—ï¼‰ | âŒ å¾…å®ç° | `lark/docs/blocks.go` |

### M1: æ–‡æ¡£å†™å…¥ä¸ä¿®æ”¹

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| åˆ›å»ºæ–°æ–‡æ¡£ | åœ¨æŒ‡å®šæ–‡ä»¶å¤¹åˆ›å»º Lark Docï¼Œæ”¯æŒåˆå§‹å†…å®¹ | âŒ å¾…å®ç° | `lark/docs/writer.go` |
| è¿½åŠ å†…å®¹ | å‘å·²æœ‰æ–‡æ¡£è¿½åŠ æ®µè½/è¡¨æ ¼/å›¾ç‰‡/ä»£ç å— | âŒ å¾…å®ç° | `lark/docs/writer.go` |
| å®šä½ä¿®æ”¹ | æŒ‰ Block ID å®šä½åˆ°å…·ä½“æ®µè½ï¼Œæ›¿æ¢/æ’å…¥/åˆ é™¤ | âŒ å¾…å®ç° | `lark/docs/editor.go` |
| æ·»åŠ è¯„è®º | åœ¨æ–‡æ¡£æŒ‡å®šä½ç½®æ·»åŠ è¯„è®º/æ‰¹æ³¨ | âŒ å¾…å®ç° | `lark/docs/comments.go` |
| å›å¤è¯„è®º | å¯¹å·²æœ‰è¯„è®ºè¿›è¡Œå›å¤ | âŒ å¾…å®ç° | `lark/docs/comments.go` |
| æƒé™ç®¡ç† | è®¾ç½®/ä¿®æ”¹æ–‡æ¡£å…±äº«æƒé™ï¼ˆæŸ¥çœ‹/ç¼–è¾‘/ç®¡ç†ï¼‰ | âŒ å¾…å®ç° | `lark/docs/permission.go` |

### M2: æ–‡æ¡£æ™ºèƒ½

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| æ–‡æ¡£æ‘˜è¦ | é•¿æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆæ‘˜è¦ | âŒ å¾…å®ç° | `lark/docs/` |
| ç‰ˆæœ¬å·®å¼‚å¯¹æ¯” | æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬çš„å†…å®¹å·®å¼‚ | âŒ å¾…å®ç° | `lark/docs/` |
| æ¨¡æ¿å¡«å…… | æ ¹æ®åœºæ™¯é€‰æ‹©æ¨¡æ¿å¹¶è‡ªåŠ¨å¡«å…… | âŒ å¾…å®ç° | `lark/docs/` |
| è”åŠ¨æ›´æ–° | A æ–‡æ¡£å˜æ›´åæé†’/æ›´æ–°å¼•ç”¨äº† A çš„ B æ–‡æ¡£ | âŒ å¾…å®ç° | `lark/docs/` |

---

## 4. Lark è¡¨æ ¼ (Sheets / Bitable)

> æ–°å¢ `internal/lark/sheets/` Â· `internal/lark/bitable/`

### M1: è¡¨æ ¼è¯»å†™

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| Sheets è¯»å– | æŒ‰èŒƒå›´è¯»å–å•å…ƒæ ¼å†…å®¹ï¼ˆæ”¯æŒæ ¼å¼/å…¬å¼ï¼‰ | âŒ å¾…å®ç° | `lark/sheets/reader.go` |
| Sheets å†™å…¥ | å†™å…¥/æ›´æ–°å•å…ƒæ ¼ã€è¿½åŠ è¡Œã€è®¾ç½®æ ¼å¼ | âŒ å¾…å®ç° | `lark/sheets/writer.go` |
| Bitable è¯»å– | è¯»å–å¤šç»´è¡¨æ ¼è®°å½•ï¼ˆå¸¦ç­›é€‰/æ’åº/åˆ†é¡µï¼‰ | âŒ å¾…å®ç° | `lark/bitable/reader.go` |
| Bitable å†™å…¥ | åˆ›å»º/æ›´æ–°/åˆ é™¤è®°å½•ã€æ·»åŠ å­—æ®µ | âŒ å¾…å®ç° | `lark/bitable/writer.go` |
| æ•°æ®åˆ†æ | å¯¹è¡¨æ ¼æ•°æ®æ‰§è¡Œç»Ÿè®¡åˆ†æï¼ˆæ±‚å’Œ/å‡å€¼/åˆ†ç»„ï¼‰ | âŒ å¾…å®ç° | `lark/sheets/analysis.go` |

### M2: è¡¨æ ¼è‡ªåŠ¨åŒ–

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| å®šæ—¶æ•°æ®åŒæ­¥ | ä»å¤–éƒ¨æ•°æ®æºå®šæ—¶æ‹‰å–æ›´æ–°åˆ° Lark è¡¨æ ¼ | âŒ å¾…å®ç° | `lark/sheets/` |
| å˜æ›´ç›‘å¬ | Webhook ç›‘å¬è¡¨æ ¼æ•°æ®å˜æ›´ï¼Œè§¦å‘ Agent å¤„ç† | âŒ å¾…å®ç° | `lark/sheets/` |
| æŠ¥è¡¨è‡ªåŠ¨ç”Ÿæˆ | å®šæ—¶æ±‡æ€»è¡¨æ ¼æ•°æ®ç”ŸæˆæŠ¥è¡¨æ–‡æ¡£ | âŒ å¾…å®ç° | `lark/sheets/` |
| å›¾è¡¨ç”Ÿæˆ | ä»è¡¨æ ¼æ•°æ®ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ | âŒ å¾…å®ç° | `lark/sheets/` |

---

## 5. Lark çŸ¥è¯†åº“ (Wiki)

> æ–°å¢ `internal/lark/wiki/`

### M1: çŸ¥è¯†åº“è¯»å–

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| ç©ºé—´æµè§ˆ | åˆ—å‡ºçŸ¥è¯†åº“ç©ºé—´ã€èŠ‚ç‚¹æ ‘ç»“æ„ | âŒ å¾…å®ç° | `lark/wiki/reader.go` |
| å†…å®¹è¯»å– | è¯»å–çŸ¥è¯†åº“æ–‡æ¡£å…¨æ–‡ | âŒ å¾…å®ç° | `lark/wiki/reader.go` |
| è¯­ä¹‰æœç´¢ | åœ¨çŸ¥è¯†åº“ä¸­è¯­ä¹‰æœç´¢ç›¸å…³å†…å®¹ | âŒ å¾…å®ç° | `lark/wiki/search.go` |

### M1: çŸ¥è¯†åº“å†™å…¥

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| é¡µé¢åˆ›å»º | åœ¨çŸ¥è¯†åº“ä¸­åˆ›å»ºæ–°é¡µé¢ | âŒ å¾…å®ç° | `lark/wiki/writer.go` |
| é¡µé¢æ›´æ–° | ä¿®æ”¹å·²æœ‰é¡µé¢å†…å®¹ | âŒ å¾…å®ç° | `lark/wiki/writer.go` |

### M2: çŸ¥è¯†è‡ªåŠ¨åŒ–

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| è‡ªåŠ¨æ²‰æ·€ | ä»ç¾¤èŠè®¨è®º/ä¼šè®®çºªè¦ä¸­æå–çŸ¥è¯†ï¼Œè‡ªåŠ¨å†™å…¥ Wiki | âŒ å¾…å®ç° | `lark/wiki/` |
| è¿‡æ—¶æ£€æµ‹ | æ£€æµ‹é•¿æœŸæœªæ›´æ–°/è¢«å¼•ç”¨çš„çŸ¥è¯†é¡µé¢ | âŒ å¾…å®ç° | `lark/wiki/` |
| è‡ªåŠ¨å½’æ¡£ | å°†è¿‡æ—¶å†…å®¹å½’æ¡£åˆ°æŒ‡å®šåŒºåŸŸ | âŒ å¾…å®ç° | `lark/wiki/` |

---

## 6. Lark æ—¥å† (Calendar)

> æ–°å¢ `internal/lark/calendar/`

### M1: æ—¥å†æ“ä½œ

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| æ—¥ç¨‹æŸ¥è¯¢ | æŸ¥è¯¢ç”¨æˆ·æ—¥ç¨‹ï¼ˆä»Šå¤©/æœ¬å‘¨/æŒ‡å®šèŒƒå›´ï¼‰ | âŒ å¾…å®ç° | `lark/calendar/reader.go` |
| æ—¥ç¨‹åˆ›å»º | åˆ›å»ºä¼šè®®/äº‹ä»¶ï¼Œé‚€è¯·å‚ä¸è€…ï¼Œè®¾ç½®æé†’ | âŒ å¾…å®ç° | `lark/calendar/writer.go` |
| æ—¥ç¨‹ä¿®æ”¹/å–æ¶ˆ | ä¿®æ”¹æ—¶é—´/åœ°ç‚¹/å‚ä¸è€…ï¼Œæˆ–å–æ¶ˆ | âŒ å¾…å®ç° | `lark/calendar/writer.go` |
| ç©ºé—²æ—¶é—´æŸ¥æ‰¾ | æŸ¥æ‰¾å¤šäººå…±åŒå¯ç”¨æ—¶é—´æ®µ | âŒ å¾…å®ç° | `lark/calendar/finder.go` |

### M2: æ—¥å†æ™ºèƒ½

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| ä¼šè®®å‡†å¤‡åŠ©æ‰‹ | ä¼šè®®å‰è‡ªåŠ¨æ±‡æ€»ç›¸å…³æ–‡æ¡£ã€ä¸Šæ¬¡çºªè¦ã€å¾…åŠ | âŒ å¾…å®ç° | `lark/calendar/` |
| ä¼šè®®çºªè¦è‡ªåŠ¨ç”Ÿæˆ | ä¼šè®®ç»“æŸåä¸»åŠ¨ç”Ÿæˆå¹¶æ¨é€çºªè¦ | âŒ å¾…å®ç° | `skills/meeting-notes/` |
| æ—¥ç¨‹å†²çªé¢„è­¦ | æ£€æµ‹å¹¶æé†’æ—¥ç¨‹å†²çª | âŒ å¾…å®ç° | `lark/calendar/` |
| æ—¥ç¨‹å»ºè®® | åŸºäºå†å²æ¨¡å¼å»ºè®®ä¼šè®®æ—¶é—´ | âŒ å¾…å®ç° | `lark/calendar/` |

---

## 7. Lark ä»»åŠ¡ (Tasks) ä¸å®¡æ‰¹ (Approval)

> æ–°å¢ `internal/lark/tasks/` Â· `internal/lark/approval/`

### M1: ä»»åŠ¡ç®¡ç†

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| ä»»åŠ¡æŸ¥è¯¢ | æŸ¥è¯¢å¾…åŠ/å·²å®Œæˆä»»åŠ¡åˆ—è¡¨ | âŒ å¾…å®ç° | `lark/tasks/reader.go` |
| ä»»åŠ¡åˆ›å»º | åˆ›å»ºä»»åŠ¡ + æŒ‡æ´¾è´Ÿè´£äºº + æˆªæ­¢æ—¥æœŸ | âŒ å¾…å®ç° | `lark/tasks/writer.go` |
| ä»»åŠ¡æ›´æ–° | æ ‡è®°å®Œæˆã€ä¿®æ”¹æˆªæ­¢æ—¥æœŸã€æ·»åŠ è¯„è®º | âŒ å¾…å®ç° | `lark/tasks/writer.go` |
| é€¾æœŸè·Ÿè¿› | é€¾æœŸ/å³å°†åˆ°æœŸä»»åŠ¡ä¸»åŠ¨ Lark æé†’ | âŒ å¾…å®ç° | `lark/tasks/` |

### M1: å®¡æ‰¹æµ

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| å®¡æ‰¹æŸ¥è¯¢ | æŸ¥è¯¢å¾…å®¡æ‰¹/å·²å®¡æ‰¹è®°å½• | âŒ å¾…å®ç° | `lark/approval/reader.go` |
| å‘èµ·å®¡æ‰¹ | é€šè¿‡ Approval API å‘èµ·å®¡æ‰¹æµç¨‹ | âŒ å¾…å®ç° | `lark/approval/writer.go` |
| çŠ¶æ€è¿½è¸ª | ç›‘å¬å®¡æ‰¹çŠ¶æ€å˜æ›´ï¼Œé€šçŸ¥å‘èµ·äºº | âŒ å¾…å®ç° | `lark/approval/tracker.go` |

---

## 8. Lark ç»Ÿä¸€å·¥å…·å°è£…

> `internal/tools/builtin/larktools/`

å°†ä¸Šè¿°æ‰€æœ‰ Lark ç”Ÿæ€èƒ½åŠ›å°è£…ä¸º Agent å¯è°ƒç”¨çš„å·¥å…·é›†ã€‚

**è·¨ Track è¾¹ç•Œï¼š** `larktools/` çš„å·¥å…·å®ç°å±äº Track 3ï¼ˆLark é¢†åŸŸï¼‰ï¼Œä½†é€šè¿‡ Track 2 çš„å·¥å…·å¼•æ“æ³¨å†Œæœºåˆ¶ï¼ˆ`tools/registry.go`ï¼‰æš´éœ²ç»™ Agentã€‚Track 2 æä¾›ç«¯å£ï¼ˆå·¥å…·æ³¨å†Œæ¥å£ï¼‰ï¼ŒTrack 3 æä¾›é€‚é…å™¨ï¼ˆLark å·¥å…·å®ç°ï¼‰ã€‚

### M1: å·¥å…·æ³¨å†Œ

| å·¥å…·å | èƒ½åŠ› | çŠ¶æ€ |
|--------|------|------|
| `lark_send_message` | å‘é€æ¶ˆæ¯åˆ° Lark ç¾¤/ç§èŠ | âœ… å·²å®ç° |
| `lark_chat_history` | è·å–ç¾¤èŠå†å²æ¶ˆæ¯ | âœ… å·²å®ç° |
| `lark_doc_read` | è¯»å– Lark æ–‡æ¡£å†…å®¹ | âŒ å¾…å®ç° |
| `lark_doc_write` | åˆ›å»º/ä¿®æ”¹ Lark æ–‡æ¡£ | âŒ å¾…å®ç° |
| `lark_doc_comment` | æ·»åŠ /è¯»å–/å›å¤æ–‡æ¡£è¯„è®º | âŒ å¾…å®ç° |
| `lark_sheet_read` | è¯»å–ç”µå­è¡¨æ ¼/å¤šç»´è¡¨æ ¼ | âŒ å¾…å®ç° |
| `lark_sheet_write` | å†™å…¥ç”µå­è¡¨æ ¼/å¤šç»´è¡¨æ ¼ | âŒ å¾…å®ç° |
| `lark_wiki_search` | æœç´¢çŸ¥è¯†åº“å†…å®¹ | âŒ å¾…å®ç° |
| `lark_wiki_write` | åˆ›å»º/ä¿®æ”¹çŸ¥è¯†åº“é¡µé¢ | âŒ å¾…å®ç° |
| `lark_calendar_query` | æŸ¥è¯¢æ—¥ç¨‹å®‰æ’ | âŒ å¾…å®ç° |
| `lark_calendar_create` | åˆ›å»ºæ—¥ç¨‹/ä¼šè®® | âŒ å¾…å®ç° |
| `lark_task_manage` | åˆ›å»º/æŸ¥è¯¢/æ›´æ–°ä»»åŠ¡ | âŒ å¾…å®ç° |
| `lark_approval_submit` | å‘èµ·å®¡æ‰¹æµç¨‹ | âŒ å¾…å®ç° |

---

## 9. Web Dashboard

> `web/`

### ç°çŠ¶

SSE æµå¼æ¸²æŸ“ã€å¯¹è¯ç•Œé¢ã€é™„ä»¶/å·¥å…·å¯è§†åŒ–ã€ä¼šè¯ç®¡ç†ã€æˆæœ¬è¿½è¸ª â€” å…¨éƒ¨å·²å®ç°ã€‚

### M1: å¢å¼ºä½“éªŒ

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| æ‰§è¡Œè¿‡ç¨‹å›æ”¾ | é€æ­¥å›æ”¾ Agent æ‰§è¡Œè¿‡ç¨‹ | âŒ å¾…å®ç° | `web/components/agent/` |
| æ‰§è¡Œæ—¶é—´çº¿ | ç”˜ç‰¹å›¾å¼å±•ç¤ºå·¥å…·æ‰§è¡Œæ—¶åº | âŒ å¾…å®ç° | `web/components/agent/` |
| å­ Agent æ‰§è¡Œæ ‘ | å¯è§†åŒ–å¤š Agent å§”æ´¾å…³ç³» | âš™ï¸ éƒ¨åˆ† | `web/components/agent/` |
| ç”¨æˆ·çº é”™å…¥å£ | ä¸­æ–­ â†’ ä¿®æ”¹ç›®æ ‡ â†’ é‡è¯• | âŒ å¾…å®ç° | `web/components/agent/` |

### M2: é«˜çº§åŠŸèƒ½

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| æ¨ç†å†³ç­–æ ‘å¯è§†åŒ– | Agent æ¨ç†è¿‡ç¨‹å¯è§†åŒ– | âŒ å¾…å®ç° | `web/components/agent/` |
| èµ„æºç›‘æ§é¢æ¿ | Token/æˆæœ¬/å»¶è¿Ÿç›‘æ§ | âŒ å¾…å®ç° | `web/components/monitoring/` |
| åä½œæ¨¡å¼ | å¤šç”¨æˆ·åŒæ—¶å‚ä¸ä¼šè¯ | âŒ å¾…å®ç° | `web/` |
| ç§»åŠ¨ç«¯é€‚é… | å“åº”å¼ + PWA | âŒ å¾…å®ç° | `web/` |

---

## 10. CLI ç•Œé¢

> `cmd/alex/` Â· `internal/cli/`

### ç°çŠ¶

TUI äº¤äº’ã€å®¡æ‰¹ã€ä¼šè¯æŒä¹…åŒ– â€” å…¨éƒ¨å·²å®ç°ã€‚

### M1: CLI å¢å¼º

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| ç®¡é“æ¨¡å¼ | stdin/stdout ç®¡é“ï¼Œä¸ shell å·¥å…·é“¾é›†æˆ | âŒ å¾…å®ç° | `cmd/alex/` |
| åå°å®ˆæŠ¤ | CLI ä½œä¸ºåå°æœåŠ¡è¿è¡Œ | âŒ å¾…å®ç° | `cmd/alex/` |
| å¿«æ·æŒ‡ä»¤ | å¸¸ç”¨æ“ä½œåˆ«åä¸å¿«æ·é”® | âŒ å¾…å®ç° | `cmd/alex/` |

---

## 11. è·¨äº¤äº’é¢ä¸€è‡´æ€§

### M1: ç»Ÿä¸€ä½“éªŒ

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| è·¨é¢ä¼šè¯åŒæ­¥ | Lark/Web/CLI æ— ç¼åˆ‡æ¢åŒä¸€ä¼šè¯ | âŒ å¾…å®ç° | `internal/session/` |
| ç»Ÿä¸€é€šçŸ¥ä¸­å¿ƒ | æ¨é€åˆ°ç”¨æˆ·åå¥½æ¸ é“ | âŒ å¾…å®ç° | `internal/notification/` |
| è·¨é¢å®¡æ‰¹ | ä»»æ„é¢å‘èµ·/å®Œæˆå®¡æ‰¹ | âš™ï¸ éƒ¨åˆ† | `internal/agent/domain/` |
| ç»Ÿä¸€é™„ä»¶ç®¡ç† | æ‰€æœ‰é¢å…±äº«é™„ä»¶å­˜å‚¨ | âš™ï¸ éƒ¨åˆ† | `internal/attachments/` |

---

## 12. macOS Companion App + æœ¬åœ° Node Host

> æ–°å¢ `macos/` (SwiftUI) Â· `internal/tools/builtin/nodehost/` (Gateway ä¾§)
>
> **OpenClaw Delta 6**

**æ¶æ„å®šä½ï¼š** macOS åŸç”Ÿå¸¸é©»å…¥å£ + æœ¬åœ°æƒé™ä¸­å¿ƒ + å·¥å…·æ‰§è¡Œå®¿ä¸»ã€‚é€šè¿‡ menu bar companion app æä¾›ç³»ç»Ÿçº§æƒé™ç®¡ç†ï¼ˆTCC brokerï¼‰å’Œæœ¬åœ°åŸç”Ÿå·¥å…·ï¼ˆå±å¹•æˆªå–ã€éŸ³é¢‘å½•åˆ¶ã€UI è‡ªåŠ¨åŒ–ï¼‰ï¼Œé€šè¿‡ localhost HTTP API ä¸ Go Gateway å¯¹æ¥ï¼Œå·¥å…·æ³¨å†Œä¸º `node:` å‰ç¼€çš„åŠ¨æ€å·¥å…·ã€‚

```
macOS Companion App (SwiftUI, menu bar)
  â”œâ”€â”€ PermissionManager (TCC broker)
  â”œâ”€â”€ NodeHostServer (localhost:19820)
  â”‚     â”œâ”€â”€ node:system_run
  â”‚     â”œâ”€â”€ node:screen_capture
  â”‚     â”œâ”€â”€ node:audio_record
  â”‚     â”œâ”€â”€ node:ui_automation
  â”‚     â”œâ”€â”€ node:fs_read / fs_write
  â”‚     â”œâ”€â”€ node:open_app
  â”‚     â””â”€â”€ node:clipboard
  â”œâ”€â”€ WebChatView (WKWebView â†’ Next.js)
  â””â”€â”€ SettingsView (Gateway URL, token, permissions)
        â”‚
        â”‚ HTTP + Bearer token (localhost only)
        â–¼
  elephant.ai Gateway â†’ toolregistry dynamic registration
```

### M1: åè®®ä¸ Gateway é›†æˆ

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| Node Host API å¥‘çº¦ | `/api/v1/tools/{name}/execute` REST åè®® + å·¥å…·å‘ç°ç«¯ç‚¹ + æƒé™æŸ¥è¯¢ç«¯ç‚¹ | âŒ å¾…å®ç° | `internal/tools/builtin/nodehost/` |
| Gateway proxy executor | ä¸ºæ¯ä¸ª node host å·¥å…·åˆ›å»º proxy executorï¼ŒåŠ¨æ€æ³¨å†Œä¸º `node:` å‰ç¼€å·¥å…· | âŒ å¾…å®ç° | `nodehost/nodehost.go` |
| åŠ¨æ€æ³¨å†Œ/æ³¨é”€ | Gateway å¯åŠ¨æ—¶å°è¯•è¿æ¥ node hostï¼›æ–­å¼€æ—¶ auto-unregisterï¼›æ¢å¤å auto-register | âŒ å¾…å®ç° | `nodehost/connector.go` |
| NodeHost é…ç½® | `configs/nodehost.yaml`ï¼šenabled/base_url/token_file/timeout/per-tool å¼€å…³ | âŒ å¾…å®ç° | `internal/config/file_config.go` |

### M2: Companion App MVP

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| Menu bar å¸¸é©» | SwiftUI AppDelegateï¼ŒçŠ¶æ€å›¾æ ‡ï¼Œå…¨å±€ hotkey å”¤èµ· | âŒ å¾…å®ç° | `macos/ElephantCompanion/` |
| Node Host Server | æœ¬åœ° HTTP server (localhost:19820)ï¼ŒBearer token è®¤è¯ | âŒ å¾…å®ç° | `macos/ElephantCompanion/NodeHost/` |
| TCC Permission Manager | å±å¹•å½•åˆ¶/éº¦å…‹é£/è¾…åŠ©åŠŸèƒ½/å®Œå…¨ç£ç›˜è®¿é—®æƒé™è¯·æ±‚ä¸çŠ¶æ€ç®¡ç† | âŒ å¾…å®ç° | `macos/ElephantCompanion/Permissions/` |
| æ ¸å¿ƒå·¥å…·å®ç° | node:system_run + node:screen_captureï¼ˆMVP æœ€å°é›†ï¼‰ | âŒ å¾…å®ç° | `macos/ElephantCompanion/Tools/` |
| æƒé™çŠ¶æ€ä¸ŠæŠ¥ | `GET /api/v1/permissions` æš´éœ²ç»™ Gatewayï¼Œæƒé™ç¼ºå¤±æ—¶è¿”å›å¼•å¯¼é”™è¯¯ | âŒ å¾…å®ç° | `macos/ElephantCompanion/NodeHost/` |
| WebChat View | WKWebView åµŒå…¥ç°æœ‰ Next.js Web ç•Œé¢ | âŒ å¾…å®ç° | `macos/ElephantCompanion/Views/` |
| é™çº§ç­–ç•¥ | node host æœªè¿è¡Œæ—¶ node:* ä¸å¯ç”¨ï¼›æƒé™è¢«æ‹’æ—¶è¿”å›å¼•å¯¼ï¼›æ—§ç‰ˆæ£€æŸ¥ API version | âŒ å¾…å®ç° | `nodehost/connector.go` |

### M2: å®Œæ•´å·¥å…·é›†

| é¡¹ç›® | æè¿° | çŠ¶æ€ | è·¯å¾„ |
|------|------|------|------|
| audio_record | éº¦å…‹é£å½•éŸ³ï¼ˆéœ€ TCC æƒé™ï¼‰ | âŒ å¾…å®ç° | `macos/ElephantCompanion/Tools/` |
| ui_automation | é”®é¼ æ¨¡æ‹Ÿï¼ˆéœ€è¾…åŠ©åŠŸèƒ½æƒé™ï¼‰ | âŒ å¾…å®ç° | `macos/ElephantCompanion/Tools/` |
| fs_read / fs_write | æœ¬åœ°æ–‡ä»¶è¯»å†™ï¼ˆå¯é€‰å®Œå…¨ç£ç›˜è®¿é—®ï¼‰ | âŒ å¾…å®ç° | `macos/ElephantCompanion/Tools/` |
| open_app / clipboard | æ‰“å¼€åº”ç”¨ / è¯»å†™å‰ªè´´æ¿ | âŒ å¾…å®ç° | `macos/ElephantCompanion/Tools/` |
| Notarization | Apple Developer Program ç­¾å + notarization å‘å¸ƒ | âŒ å¾…å®ç° | `macos/` |

---

## è¿›åº¦è¿½è¸ª

| æ—¥æœŸ | æ¨¡å— | æ›´æ–° |
|------|------|------|
| 2026-02-01 | All | Track 3 è¯¦ç»† ROADMAP åˆ›å»ºã€‚Lark IM / Web / CLI åŸºç¡€å·²å®ç°ï¼Œæ ¸å¿ƒç¼ºå£åœ¨ Lark æ–‡æ¡£/è¡¨æ ¼/çŸ¥è¯†åº“/æ—¥å†/ä»»åŠ¡/å®¡æ‰¹å…¨ç”Ÿæ€æ¥å…¥ã€‚ |
| 2026-02-01 | Lark IM | å®ç°å®¡è®¡ä¿®æ­£ï¼šç¾¤èŠæ¶ˆæ¯è‡ªåŠ¨æ„ŸçŸ¥ âŒâ†’âœ…ï¼ˆå·²æ”¯æŒé @mention ç›‘å¬ï¼‰ï¼›æ¶ˆæ¯å¼•ç”¨å›å¤ âŒâ†’âœ…ï¼›å®šæ—¶æé†’ âŒâ†’âš™ï¸ï¼ˆscheduler åŸºç¡€å®ç°ï¼‰ã€‚ |
| 2026-02-01 | macOS | OpenClaw D6 é›†æˆï¼šæ–°å¢ Â§12 macOS Companion App + æœ¬åœ° Node Host ç« èŠ‚ã€‚Gateway ä¾§åè®®å®šä¹‰ M1ï¼ŒCompanion App MVP + å®Œæ•´å·¥å…·é›† M2ã€‚ |
